'use strict';

var algosdk = require('algosdk');
var types_algorandClient = require('../types/algorand-client.js');
var config = require('../config.js');

async function getTestAccount({ suppressLog, initialFunds, accountGetter }, algodOrAlgorandClient, kmd) {
    const algorand = algodOrAlgorandClient instanceof types_algorandClient.AlgorandClient
        ? algodOrAlgorandClient
        : types_algorandClient.AlgorandClient.fromClients({
            algod: algodOrAlgorandClient,
            kmd,
        });
    const account = accountGetter ? await accountGetter(algorand) : algosdk.generateAccount();
    config.Config.getLogger(suppressLog).info(`New test account created with address '${account.addr}' and mnemonic '${algosdk.secretKeyToMnemonic(account.sk)}'.`);
    const dispenser = await algorand.account.dispenserFromEnvironment();
    await algorand.send.payment({ sender: dispenser.addr, receiver: account.addr, amount: initialFunds, note: 'Funding test account' }, { suppressLog });
    const accountInfo = await algorand.account.getInformation(account.addr);
    config.Config.getLogger(suppressLog).info('Test account funded; account balance: %d ÂµAlgos', accountInfo.amount);
    return account;
}

exports.getTestAccount = getTestAccount;
//# sourceMappingURL=account.js.map
